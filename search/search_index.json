{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u8ba1\u7b97\u5de2 lindorm+langchian\u6587\u6863 \u7cfb\u7edf\u7b80\u4ecb\uff1a \u6574\u4f53\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u4e00\u4e2a\u662fLLM\u5bf9\u8bdd\uff0c\u4e3a\u76f4\u63a5\u5bf9\u8bdd\u5927\u6a21\u578b\u3002\u53e6\u4e00\u4e2a\u4e3a\u77e5\u8bc6\u5e93\u95ee\u7b54\uff0c\u7528\u6237\u95ee\u9898\u5148\u5728\u77e5\u8bc6\u5e93\u4e2d\u8fdb\u884c\u8fd1\u4f3c\u68c0\u7d22\uff0c\u7136\u540e\u518d\u628a\u8fd1\u4f3c\u68c0\u7d22\u7ed3\u679c\u4e0e\u95ee\u9898\u8fdb\u884cPrompt\u518d\u63d0\u4ea4\u5927\u6a21\u578b\u3002\u8be5\u7cfb\u7edf\u5c06Langchain\u4e0eLindorm\u8fdb\u884c\u4e86\u6df1\u5ea6\u878d\u5408\uff0c\u96c6\u6210\u4e86LindormAl\u7684LLM\u3001Embedding\u3001Rerank\u6a21\u578b\uff0c\u4e3a\u89e3\u51b3LLM\u6a21\u578b\u90e8\u7f72\u8f83\u5360\u7528\u8d44\u6e90\u7684\u95ee\u9898\uff0c\u540c\u65f6\u652f\u6301\u901a\u8fc7API Key\u8bbf\u95ee\u901a\u4e49\u5343\u95ee\u7684\u65b9\u5f0f\uff1b\u96c6\u6210\u4e86Lindorm\u7684\u641c\u7d22\u4e0e\u5411\u91cf\u5f15\u64ce\uff0c\u652f\u6301\u8fd1\u4f3c\u68c0\u7d22\u3001\u5411\u91cf\u6587\u672c\u6df7\u5408\u68c0\u7d22\u7b49\uff1b\u652f\u6301\u7236\u5b50\u6587\u6863\u7684chunk\u5207\u5206\u4e0e\u67e5\u8be2\uff0c\u63d0\u5347\u4e0a\u4e0b\u6587\u7684\u5173\u8054\u6027 \u8ba1\u7b97\u5de2\u4e00\u952e\u62c9\u8d77Chatbot \u524d\u63d0\u6761\u4ef6 \u5f00\u901aLindormAi\u5f15\u64ce\uff1a https://help.aliyun.com/document_detail/2399392.html \u96c6\u6210\u4e86Embedding\u3001Rerank\u6a21\u578b\u7684\u80fd\u529b \u5f00\u901aLindorm\u641c\u7d22\u4e0e\u5411\u91cf\uff1a https://help.aliyun.com/document_detail/2787357.html \u83b7\u53d6Dashscope Apikey\uff1a https://help.aliyun.com/zh/dashscope/opening-service LindormAI\u5f15\u64ce\u4e0eLindorm\u5411\u91cf\u5b9e\u4f8b\u52a1\u5fc5\u9009\u62e9\u5728\u540c\u4e00\u4e2avpc\u5185\uff0c\u4e14\u5c06\u5b9e\u4f8b\u7684\u767d\u540d\u5355\u914d\u7f6e\u4e3a\u8be5vpc\u5185\u7684\u7f51\u6bb5\uff0c\u786e\u4fdd\u90e8\u7f72Chatbot\u7684\u670d\u52a1ECS\u80fd\u6b63\u786e\u8bbf\u95ee\u3002 \u4ee5\u4e0a\u5b9e\u4f8b\u5f00\u901a\u6216\u914d\u7f6e\u6709\u7591\u95ee\uff0c\u8bf7\u63d0Lindorm\u5de5\u5355\uff0c\u6211\u4eec\u4f1a\u62c9\u5bf9\u63a5\u7fa4\u63d0\u4f9b\u652f\u6301\u3002 \u5f00\u901a\u6307\u5357\uff1a \u914d\u7f6e\u5982\u4ee5\u4e0b\u622a\u56fe\u6240\u793a\u3002 \u521b\u5efa\u6210\u529f\u540e\uff0c\u767b\u5f55\u5373\u53ef, \u8d26\u53f7\u662f amdin\uff0c \u5bc6\u7801\u4e3a\u4e0a\u8ff0\u8f6f\u4ef6\u914d\u7f6e\u8bbe\u7f6e\u7684\u5bc6\u7801 \u4f7f\u7528\u6307\u5357 3.1 \u521b\u5efa\u77e5\u8bc6\u5e93\u8bbe\u7f6e\u53c2\u6570\uff1a \u662f\u5426\u5f00\u542f\u6df7\u5408\u68c0\u7d22\uff1a\u6307\u7684\u662f\u5411\u91cf\u4e0e\u5168\u6587\u6df7\u5408\u68c0\u7d22 \u81ea\u5b9a\u4e49\u8def\u7531\u952e\uff1a\u5047\u8bbe\u60a8\u6709\u6839\u636e\u7c7b\u4f3c\u7528\u6237id\u67e5\u8be2\u7684\u9700\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u8def\u7531\u952e\u529f\u80fd\uff0c\u5177\u5907\u6d77\u91cf\u7d22\u5f15\u7a7a\u95f4\u529f\u80fd \u7236\u5b50\u6587\u6863Chunk\u5207\u5206\uff1a\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u5207\u5206\u7684\u6587\u6863\u66f4\u52a0\u5177\u5907\u4e0a\u4e0b\u6587\u5173\u8054\u6027 3.2 Rerank\u6f14\u793a 3.3 \u7236\u5b50\u6587\u6863\u6f14\u793a \u670d\u52a1\u90e8\u7f72\u539f\u7406\uff1a \u73af\u5883\u9700\u6c42 \u673a\u578b\uff1a ecs.g6 \u6216 ecs.g7 \u901a\u7528\u673a\u578b\u5373\u53ef \u64cd\u4f5c\u7cfb\u7edf\uff1aUbuntu 22.04 64\u4f4d python\u7248\u672c: 3.10 (\u4e0a\u8ff0\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4python\u7248\u672c) \u524d\u7f6e\u6761\u4ef6 (lindorm AI\u5f15\u64ce\u3001\u641c\u7d22\u5f15\u64ce\u3001\u5411\u91cf\u5f15\u64ce\u540e\u7eed\u4f1a\u7edf\u4e00\u67b6\u6784 \uff0c\u518d\u7528\u6237\u4fa7\u770b\u5230\u7684\u662f\u4e00\u4e2a\u5b9e\u4f8b) Lindorm Search\u4e0eVector\u5f15\u64ce\u3002 Lindorm AI \u5f15\u64ce DashScope API key: \u76f4\u63a5\u6258\u7ba1\u5927\u6a21\u578b\uff0c\u9700\u8981\u8d44\u6e90\u8f83\u591a\uff0c\u4e14\u5bb9\u6613\u9891\u7e41\u89e6\u53d1\u670d\u52a1\u8bbf\u95ee\u8d85\u65f6\uff08\u4e3a\u4fdd\u8bc1\u6f14\u793a\u670d\u52a1\u7684\u7a33\u5b9a\u6027\uff0c\u6682\u65f6\u901a\u8fc7APIkey\u8bbf\u95ee\u901a\u4e49\u5343\u95ee\uff09 \u4f9d\u8d56\u5b89\u88c5\uff1a \u5b89\u88c5lindorm ai\uff1apip3 intall lindormai-0.1.2-py3-none-any.whl \u5f53\u524dECS\u5185\u5df2\u5b89\u88c5 \u5b89\u88c5langchian\u4e0e\u96c6\u6210Lindorm\u7684\u63d2\u4ef6 \u6574\u4f53\u53c2\u8003\uff1a\u5f53\u524dECS\u5df2\u6267\u884c 1. git clone git@github.com:langchain-ai/langchain.git 2. \u5047\u8bbe\u4f4d\u7f6e\u5728 /data/lindorm/soft/ \u76ee\u5f55\uff0c \u6267\u884c\u4ee5\u4e0b\u8f6f\u94fe\u63a5 cd /data/lindorm/soft/langchain/libs/community/langchain_community/chat_models ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/chat_models/lindormai.py lindormai.py cd /data/lindorm/soft/langchain/libs/community/langchain_community/llms ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/llms/lindormai.py lindormai.py cd /data/lindorm/soft/langchain/libs/community/langchain_community/embeddings ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/embeddings/lindormai.py lindormai.py cd /data/lindorm/soft/langchain/libs/community/langchain_community/document_compressors ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/document_compressors/lindormai_rerank.py lindormai_rerank.py cd /data/lindorm/soft/langchain/libs/community/langchain_community/vectorstores ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/vectorstores/lindorm_search_store.py lindorm_search_store.py cd /data/lindorm/soft/langchain/libs/community/langchain_community/storage ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/storage/lindorm_search_bytestore.py lindorm_search_bytestore.py cd /data/lindorm/soft/langchain/libs/community/langchain_community/retrievers ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/retrievers/lindorm_parent_document_retriever.py lindorm_parent_document_retriever.py 3. \u5728langchain\u76ee\u5f55\u4e0b\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5c06\u63d2\u4ef6\u5b89\u88c5\u81f3\u672c\u5730\uff1a pip3 install -e libs/community \u5b89\u88c5\u5176\u5b83python\u4f9d\u8d56 \u53ef\u4ee5\u5c06\u4e0b\u9762\u4f9d\u8d56\u653e\u5728 requirements.txt \u6587\u4ef6\u4e2d\uff0c\u7136\u540e\u6267\u884c pip3 install -r requirements.txt pip3 install nltk==3.8.1 pip3 install gradio==3.28.3 pip3 install fastapi==0.95.0 pip3 install numpy==1.23.5 pip3 install requests~=2.28.2 pip3 install sentence-transformers pip3 install environs pip3 install dashscope pip install opensearch-py==2.6.0 \u73af\u5883\u53d8\u91cf\u8bbe\u7f6e \u7a0b\u5e8f\u90e8\u7f72\u5728 \u76ee\u5f55\uff1a/data/lindorm/langchain-ChatGLM/ \u7f16\u8f91 /data/lindorm/langchain-ChatGLM/.env \u6587\u4ef6 # LLM\u5927\u6a21\u578b\uff0c\u76ee\u524d\u652f\u6301apikey\u4e0e\u672c\u5730\u6258\u7ba1\u90e8\u7f72\u7684\u65b9\u5f0f AI_CHAT_LLM_ENDPOINT=\"http://ld-xxxx-proxy-ml.lindorm.rds.aliyuncs.com:9002\" AI_CHAT_LLM_USERNAME=\"root\" AI_CHAT_LLM_PWD=\"xx\" # Embedding\u6a21\u578b AI_EMB_ENDPOINT=\"http://ld-xxxx-proxy-ml.lindorm.rds.aliyuncs.com:9002\" AI_EMB_USERNAME=\"root\" AI_EMB_PWD=\"xx\" # Rerank \u6a21\u578b AI_RERANK_ENDPOINT=\"http://ld-xxxx-proxy-ml.lindorm.rds.aliyuncs.com:9002\" AI_RERANK_USERNAME=\"root\" AI_RERANK_PWD=\"xx\" # \u641c\u7d22\u5f15\u64ce\u57df\u540d\uff0c\u8be5\u5b9e\u4f8b\u5fc5\u987b\u540c\u65f6\u5305\u542b\u641c\u7d22\u5f15\u64ce\u4e0e\u5411\u91cf\u5f15\u64ce SEARCH_ENDPOINT=\"http://ld-xxxx-proxy-search-vpc.lindorm.aliyuncs.com:30070\" SEARCH_USERNAME=\"root\" SEARCH_PWD=\"xx\" \u7f16\u8f91 /data/lindorm/langchain-ChatGLM/env \u6587\u4ef6\uff0c\u6dfb\u52a0 dashscope \u7684 api key export DASHSCOPE_API_KEY=\"sk-xxxxx\" \u7a0b\u5e8f\u542f\u52a8 cd /data/lindorm/langchain-ChatGLM/\uff0c\u65e5\u5fd7\u6587\u4ef6\u4e3a /var/log/chat-lindorm.log nohup ./start.sh > /var/log/chat-lindorm.log 2>&1 & \u76f4\u63a5\u8bbf\u95ee\u670d\u52a1\u7684\u57df\u540d\u4e3a http://\u516c\u7f51ip:5001 \\============\u901a\u8fc7\u4ee5\u4e0a\u6b65\u9aa4\u4fbf\u53ef\u4ee5\u8bbf\u95ee\u670d\u52a1,\u4e0b\u9762\u7684\u6b65\u9aa4\u914d\u7f6enginx\u4e0e\u670d\u52a1\u5f00\u673a\u81ea\u542f\u52a8============== \u914d\u7f6enginx\u670d\u52a1 \u5b89\u88c5apt install nginx \u914d\u7f6e\u4ee3\u7406 \u5728 /etc/nginx/conf.d \u65b0\u5efa chat.conf server { listen 5000; listen [::]:5000; server_name _; root /usr/share/nginx/html; # Load configuration files for the default server block. include /etc/nginx/default.d/*.conf; auth_basic \"\u8bf7\u8f93\u5165\u7528\u6237\u548c\u5bc6\u7801\"; # \u9a8c\u8bc1\u65f6\u7684\u63d0\u793a\u4fe1\u606f auth_basic_user_file /etc/nginx/password; # \u8ba4\u8bc1\u6587\u4ef6 location / { proxy_pass http://0.0.0.0:5001/; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection Upgrade; } error_page 404 /404.html; location = /404.html { } error_page 500 502 503 504 /50x.html; location = /50x.html { } } \u8bbe\u7f6e\u8d26\u53f7\u5bc6\u7801\uff1a apt install apache2-utils htpasswd -bc /etc/nginx/password admin 'xxxxxxxx' \u542f\u52a8nginx\u670d\u52a1\uff1a systemctl start nginx \u8bbe\u7f6enginx\u5f00\u673a\u81ea\u542f\u52a8\uff1asystemctl enable nginx \u914d\u7f6eChatbot\u670d\u52a1\u5f00\u673a\u81ea\u542f\u52a8 cd /lib/systemd/system \u65b0\u5efa chat-lindorm.service [Unit] Description=ChatLindorm After=network-online.target Wants=network-online.target [Service] WorkingDirectory=/data/lindorm/langchain-ChatGLM ExecStart=/data/lindorm/langchain-ChatGLM/start.sh Restart=on-abnormal StandardOutput=file:/var/log/chat-lindorm.log StandardError=file:/var/log/chat-lindorm.log LimitNOFILE=60000 TimeoutSec=120 [Install] WantedBy=multi-user.target \u8bbe\u7f6e\u5f00\u542f\u81ea\u542f\u52a8: systemctl enable chat-lindorm","title":"\u8ba1\u7b97\u5de2 lindorm+langchian\u6587\u6863"},{"location":"#lindormlangchian","text":"","title":"\u8ba1\u7b97\u5de2 lindorm+langchian\u6587\u6863"},{"location":"#_1","text":"\u6574\u4f53\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u4e00\u4e2a\u662fLLM\u5bf9\u8bdd\uff0c\u4e3a\u76f4\u63a5\u5bf9\u8bdd\u5927\u6a21\u578b\u3002\u53e6\u4e00\u4e2a\u4e3a\u77e5\u8bc6\u5e93\u95ee\u7b54\uff0c\u7528\u6237\u95ee\u9898\u5148\u5728\u77e5\u8bc6\u5e93\u4e2d\u8fdb\u884c\u8fd1\u4f3c\u68c0\u7d22\uff0c\u7136\u540e\u518d\u628a\u8fd1\u4f3c\u68c0\u7d22\u7ed3\u679c\u4e0e\u95ee\u9898\u8fdb\u884cPrompt\u518d\u63d0\u4ea4\u5927\u6a21\u578b\u3002\u8be5\u7cfb\u7edf\u5c06Langchain\u4e0eLindorm\u8fdb\u884c\u4e86\u6df1\u5ea6\u878d\u5408\uff0c\u96c6\u6210\u4e86LindormAl\u7684LLM\u3001Embedding\u3001Rerank\u6a21\u578b\uff0c\u4e3a\u89e3\u51b3LLM\u6a21\u578b\u90e8\u7f72\u8f83\u5360\u7528\u8d44\u6e90\u7684\u95ee\u9898\uff0c\u540c\u65f6\u652f\u6301\u901a\u8fc7API Key\u8bbf\u95ee\u901a\u4e49\u5343\u95ee\u7684\u65b9\u5f0f\uff1b\u96c6\u6210\u4e86Lindorm\u7684\u641c\u7d22\u4e0e\u5411\u91cf\u5f15\u64ce\uff0c\u652f\u6301\u8fd1\u4f3c\u68c0\u7d22\u3001\u5411\u91cf\u6587\u672c\u6df7\u5408\u68c0\u7d22\u7b49\uff1b\u652f\u6301\u7236\u5b50\u6587\u6863\u7684chunk\u5207\u5206\u4e0e\u67e5\u8be2\uff0c\u63d0\u5347\u4e0a\u4e0b\u6587\u7684\u5173\u8054\u6027","title":"\u7cfb\u7edf\u7b80\u4ecb\uff1a"},{"location":"#chatbot","text":"\u524d\u63d0\u6761\u4ef6 \u5f00\u901aLindormAi\u5f15\u64ce\uff1a https://help.aliyun.com/document_detail/2399392.html \u96c6\u6210\u4e86Embedding\u3001Rerank\u6a21\u578b\u7684\u80fd\u529b \u5f00\u901aLindorm\u641c\u7d22\u4e0e\u5411\u91cf\uff1a https://help.aliyun.com/document_detail/2787357.html \u83b7\u53d6Dashscope Apikey\uff1a https://help.aliyun.com/zh/dashscope/opening-service LindormAI\u5f15\u64ce\u4e0eLindorm\u5411\u91cf\u5b9e\u4f8b\u52a1\u5fc5\u9009\u62e9\u5728\u540c\u4e00\u4e2avpc\u5185\uff0c\u4e14\u5c06\u5b9e\u4f8b\u7684\u767d\u540d\u5355\u914d\u7f6e\u4e3a\u8be5vpc\u5185\u7684\u7f51\u6bb5\uff0c\u786e\u4fdd\u90e8\u7f72Chatbot\u7684\u670d\u52a1ECS\u80fd\u6b63\u786e\u8bbf\u95ee\u3002 \u4ee5\u4e0a\u5b9e\u4f8b\u5f00\u901a\u6216\u914d\u7f6e\u6709\u7591\u95ee\uff0c\u8bf7\u63d0Lindorm\u5de5\u5355\uff0c\u6211\u4eec\u4f1a\u62c9\u5bf9\u63a5\u7fa4\u63d0\u4f9b\u652f\u6301\u3002 \u5f00\u901a\u6307\u5357\uff1a \u914d\u7f6e\u5982\u4ee5\u4e0b\u622a\u56fe\u6240\u793a\u3002 \u521b\u5efa\u6210\u529f\u540e\uff0c\u767b\u5f55\u5373\u53ef, \u8d26\u53f7\u662f amdin\uff0c \u5bc6\u7801\u4e3a\u4e0a\u8ff0\u8f6f\u4ef6\u914d\u7f6e\u8bbe\u7f6e\u7684\u5bc6\u7801 \u4f7f\u7528\u6307\u5357","title":"\u8ba1\u7b97\u5de2\u4e00\u952e\u62c9\u8d77Chatbot"},{"location":"#31","text":"\u662f\u5426\u5f00\u542f\u6df7\u5408\u68c0\u7d22\uff1a\u6307\u7684\u662f\u5411\u91cf\u4e0e\u5168\u6587\u6df7\u5408\u68c0\u7d22 \u81ea\u5b9a\u4e49\u8def\u7531\u952e\uff1a\u5047\u8bbe\u60a8\u6709\u6839\u636e\u7c7b\u4f3c\u7528\u6237id\u67e5\u8be2\u7684\u9700\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u8def\u7531\u952e\u529f\u80fd\uff0c\u5177\u5907\u6d77\u91cf\u7d22\u5f15\u7a7a\u95f4\u529f\u80fd \u7236\u5b50\u6587\u6863Chunk\u5207\u5206\uff1a\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u5207\u5206\u7684\u6587\u6863\u66f4\u52a0\u5177\u5907\u4e0a\u4e0b\u6587\u5173\u8054\u6027","title":"3.1 \u521b\u5efa\u77e5\u8bc6\u5e93\u8bbe\u7f6e\u53c2\u6570\uff1a"},{"location":"#32-rerank","text":"","title":"3.2 Rerank\u6f14\u793a"},{"location":"#33","text":"","title":"3.3 \u7236\u5b50\u6587\u6863\u6f14\u793a"},{"location":"#_2","text":"\u73af\u5883\u9700\u6c42 \u673a\u578b\uff1a ecs.g6 \u6216 ecs.g7 \u901a\u7528\u673a\u578b\u5373\u53ef \u64cd\u4f5c\u7cfb\u7edf\uff1aUbuntu 22.04 64\u4f4d python\u7248\u672c: 3.10 (\u4e0a\u8ff0\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4python\u7248\u672c) \u524d\u7f6e\u6761\u4ef6 (lindorm AI\u5f15\u64ce\u3001\u641c\u7d22\u5f15\u64ce\u3001\u5411\u91cf\u5f15\u64ce\u540e\u7eed\u4f1a\u7edf\u4e00\u67b6\u6784 \uff0c\u518d\u7528\u6237\u4fa7\u770b\u5230\u7684\u662f\u4e00\u4e2a\u5b9e\u4f8b) Lindorm Search\u4e0eVector\u5f15\u64ce\u3002 Lindorm AI \u5f15\u64ce DashScope API key: \u76f4\u63a5\u6258\u7ba1\u5927\u6a21\u578b\uff0c\u9700\u8981\u8d44\u6e90\u8f83\u591a\uff0c\u4e14\u5bb9\u6613\u9891\u7e41\u89e6\u53d1\u670d\u52a1\u8bbf\u95ee\u8d85\u65f6\uff08\u4e3a\u4fdd\u8bc1\u6f14\u793a\u670d\u52a1\u7684\u7a33\u5b9a\u6027\uff0c\u6682\u65f6\u901a\u8fc7APIkey\u8bbf\u95ee\u901a\u4e49\u5343\u95ee\uff09 \u4f9d\u8d56\u5b89\u88c5\uff1a \u5b89\u88c5lindorm ai\uff1apip3 intall lindormai-0.1.2-py3-none-any.whl \u5f53\u524dECS\u5185\u5df2\u5b89\u88c5 \u5b89\u88c5langchian\u4e0e\u96c6\u6210Lindorm\u7684\u63d2\u4ef6 \u6574\u4f53\u53c2\u8003\uff1a\u5f53\u524dECS\u5df2\u6267\u884c 1. git clone git@github.com:langchain-ai/langchain.git 2. \u5047\u8bbe\u4f4d\u7f6e\u5728 /data/lindorm/soft/ \u76ee\u5f55\uff0c \u6267\u884c\u4ee5\u4e0b\u8f6f\u94fe\u63a5 cd /data/lindorm/soft/langchain/libs/community/langchain_community/chat_models ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/chat_models/lindormai.py lindormai.py cd /data/lindorm/soft/langchain/libs/community/langchain_community/llms ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/llms/lindormai.py lindormai.py cd /data/lindorm/soft/langchain/libs/community/langchain_community/embeddings ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/embeddings/lindormai.py lindormai.py cd /data/lindorm/soft/langchain/libs/community/langchain_community/document_compressors ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/document_compressors/lindormai_rerank.py lindormai_rerank.py cd /data/lindorm/soft/langchain/libs/community/langchain_community/vectorstores ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/vectorstores/lindorm_search_store.py lindorm_search_store.py cd /data/lindorm/soft/langchain/libs/community/langchain_community/storage ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/storage/lindorm_search_bytestore.py lindorm_search_bytestore.py cd /data/lindorm/soft/langchain/libs/community/langchain_community/retrievers ln -sf /data/lindorm/soft/langchain_integrations/langchain_community/retrievers/lindorm_parent_document_retriever.py lindorm_parent_document_retriever.py 3. \u5728langchain\u76ee\u5f55\u4e0b\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5c06\u63d2\u4ef6\u5b89\u88c5\u81f3\u672c\u5730\uff1a pip3 install -e libs/community \u5b89\u88c5\u5176\u5b83python\u4f9d\u8d56 \u53ef\u4ee5\u5c06\u4e0b\u9762\u4f9d\u8d56\u653e\u5728 requirements.txt \u6587\u4ef6\u4e2d\uff0c\u7136\u540e\u6267\u884c pip3 install -r requirements.txt pip3 install nltk==3.8.1 pip3 install gradio==3.28.3 pip3 install fastapi==0.95.0 pip3 install numpy==1.23.5 pip3 install requests~=2.28.2 pip3 install sentence-transformers pip3 install environs pip3 install dashscope pip install opensearch-py==2.6.0 \u73af\u5883\u53d8\u91cf\u8bbe\u7f6e \u7a0b\u5e8f\u90e8\u7f72\u5728 \u76ee\u5f55\uff1a/data/lindorm/langchain-ChatGLM/ \u7f16\u8f91 /data/lindorm/langchain-ChatGLM/.env \u6587\u4ef6 # LLM\u5927\u6a21\u578b\uff0c\u76ee\u524d\u652f\u6301apikey\u4e0e\u672c\u5730\u6258\u7ba1\u90e8\u7f72\u7684\u65b9\u5f0f AI_CHAT_LLM_ENDPOINT=\"http://ld-xxxx-proxy-ml.lindorm.rds.aliyuncs.com:9002\" AI_CHAT_LLM_USERNAME=\"root\" AI_CHAT_LLM_PWD=\"xx\" # Embedding\u6a21\u578b AI_EMB_ENDPOINT=\"http://ld-xxxx-proxy-ml.lindorm.rds.aliyuncs.com:9002\" AI_EMB_USERNAME=\"root\" AI_EMB_PWD=\"xx\" # Rerank \u6a21\u578b AI_RERANK_ENDPOINT=\"http://ld-xxxx-proxy-ml.lindorm.rds.aliyuncs.com:9002\" AI_RERANK_USERNAME=\"root\" AI_RERANK_PWD=\"xx\" # \u641c\u7d22\u5f15\u64ce\u57df\u540d\uff0c\u8be5\u5b9e\u4f8b\u5fc5\u987b\u540c\u65f6\u5305\u542b\u641c\u7d22\u5f15\u64ce\u4e0e\u5411\u91cf\u5f15\u64ce SEARCH_ENDPOINT=\"http://ld-xxxx-proxy-search-vpc.lindorm.aliyuncs.com:30070\" SEARCH_USERNAME=\"root\" SEARCH_PWD=\"xx\" \u7f16\u8f91 /data/lindorm/langchain-ChatGLM/env \u6587\u4ef6\uff0c\u6dfb\u52a0 dashscope \u7684 api key export DASHSCOPE_API_KEY=\"sk-xxxxx\" \u7a0b\u5e8f\u542f\u52a8 cd /data/lindorm/langchain-ChatGLM/\uff0c\u65e5\u5fd7\u6587\u4ef6\u4e3a /var/log/chat-lindorm.log nohup ./start.sh > /var/log/chat-lindorm.log 2>&1 & \u76f4\u63a5\u8bbf\u95ee\u670d\u52a1\u7684\u57df\u540d\u4e3a http://\u516c\u7f51ip:5001 \\============\u901a\u8fc7\u4ee5\u4e0a\u6b65\u9aa4\u4fbf\u53ef\u4ee5\u8bbf\u95ee\u670d\u52a1,\u4e0b\u9762\u7684\u6b65\u9aa4\u914d\u7f6enginx\u4e0e\u670d\u52a1\u5f00\u673a\u81ea\u542f\u52a8============== \u914d\u7f6enginx\u670d\u52a1 \u5b89\u88c5apt install nginx \u914d\u7f6e\u4ee3\u7406 \u5728 /etc/nginx/conf.d \u65b0\u5efa chat.conf server { listen 5000; listen [::]:5000; server_name _; root /usr/share/nginx/html; # Load configuration files for the default server block. include /etc/nginx/default.d/*.conf; auth_basic \"\u8bf7\u8f93\u5165\u7528\u6237\u548c\u5bc6\u7801\"; # \u9a8c\u8bc1\u65f6\u7684\u63d0\u793a\u4fe1\u606f auth_basic_user_file /etc/nginx/password; # \u8ba4\u8bc1\u6587\u4ef6 location / { proxy_pass http://0.0.0.0:5001/; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection Upgrade; } error_page 404 /404.html; location = /404.html { } error_page 500 502 503 504 /50x.html; location = /50x.html { } } \u8bbe\u7f6e\u8d26\u53f7\u5bc6\u7801\uff1a apt install apache2-utils htpasswd -bc /etc/nginx/password admin 'xxxxxxxx' \u542f\u52a8nginx\u670d\u52a1\uff1a systemctl start nginx \u8bbe\u7f6enginx\u5f00\u673a\u81ea\u542f\u52a8\uff1asystemctl enable nginx \u914d\u7f6eChatbot\u670d\u52a1\u5f00\u673a\u81ea\u542f\u52a8 cd /lib/systemd/system \u65b0\u5efa chat-lindorm.service [Unit] Description=ChatLindorm After=network-online.target Wants=network-online.target [Service] WorkingDirectory=/data/lindorm/langchain-ChatGLM ExecStart=/data/lindorm/langchain-ChatGLM/start.sh Restart=on-abnormal StandardOutput=file:/var/log/chat-lindorm.log StandardError=file:/var/log/chat-lindorm.log LimitNOFILE=60000 TimeoutSec=120 [Install] WantedBy=multi-user.target \u8bbe\u7f6e\u5f00\u542f\u81ea\u542f\u52a8: systemctl enable chat-lindorm","title":"\u670d\u52a1\u90e8\u7f72\u539f\u7406\uff1a"}]}